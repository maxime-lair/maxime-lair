<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Sockets" /><meta name="author" content="Maxime Lair" /><meta property="og:locale" content="en" /><meta name="description" content="Here we will study the different sockets available and how they function. We will try to implement some, and check out how to monitor them." /><meta property="og:description" content="Here we will study the different sockets available and how they function. We will try to implement some, and check out how to monitor them." /><link rel="canonical" href="https://maxime-lair.github.io/maxime-lair/posts/sockets/" /><meta property="og:url" content="https://maxime-lair.github.io/maxime-lair/posts/sockets/" /><meta property="og:site_name" content="Bin/sh" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-10T19:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Sockets" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Maxime Lair" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Maxime Lair"},"description":"Here we will study the different sockets available and how they function. We will try to implement some, and check out how to monitor them.","url":"https://maxime-lair.github.io/maxime-lair/posts/sockets/","@type":"BlogPosting","headline":"Sockets","dateModified":"2022-02-03T22:43:28+01:00","datePublished":"2022-01-10T19:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://maxime-lair.github.io/maxime-lair/posts/sockets/"},"@context":"https://schema.org"}</script><title>Sockets | Bin/sh</title><link rel="apple-touch-icon" sizes="180x180" href="/maxime-lair/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/maxime-lair/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/maxime-lair/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/maxime-lair/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/maxime-lair/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Bin/sh"><meta name="application-name" content="Bin/sh"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/maxime-lair/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/maxime-lair/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/maxime-lair/" alt="avatar" class="mx-auto"> <img src="/maxime-lair/assets/img/favicons/avatar.gif" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/maxime-lair/">Bin/sh</a></div><div class="site-subtitle font-italic">Have fun reading</div></div><ul class="w-100"><li class="nav-item"> <a href="/maxime-lair/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/maxime-lair/roadTo/" class="nav-link"> <i class="fa-fw fas fa-road ml-xl-3 mr-xl-3 unloaded"></i> <span>ROAD TO DEVOPS</span> </a><li class="nav-item"> <a href="/maxime-lair/bin-sh/" class="nav-link"> <i class="fa-fw fas fa-tools ml-xl-3 mr-xl-3 unloaded"></i> <span>BIN-SH</span> </a><li class="nav-item"> <a href="/maxime-lair/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/maxime-lair/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/maxime-lair/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/maxime-lair/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/maxime-lair" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/maxime-lair/"> Home </a> </span> <span>Sockets</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Sockets</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/maxime-lair">Maxime Lair</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-01-10 19:00:00 +0100" data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 10, 2022, 7:00 PM +0100" >Jan 10, 2022</em> </span> <span> Updated <em class="timeago" date="2022-02-03 22:43:28 +0100 " data-toggle="tooltip" data-placement="bottom" title="Thu, Feb 3, 2022, 10:43 PM +0100" >Feb 3, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3505 words"> <em>19 min</em> read</span></div></div></div><div class="post-content"><p>Here we will study the different sockets available and how they function. We will try to implement some, and check out how to monitor them.</p><h2 id="definition">Definition<a href="#definition" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Operating systems include the BSD interprocess communication facility known as <em>sockets</em>. They are communication channels that enable unrelated processes to exchange data <em>locally and across networks</em>. The Berkeley sockets API represents it as a file descriptor (file handle) in the Unix philosophy that provides a common interface for input and output to streams of data. Berkeley sockets evolved with little modification from a de facto standard into a component of the POSIX specification. The term POSIX sockets is essentially synonymous with Berkeley sockets, but they are also known as BSD sockets.</p><p>A <em>socket</em> uniquely identifies the endpoint of a communication link between two application ports. A socket is typically representated through five informations:</p><ul><li>The domain<li>The type<li>The protocol<li>The hostname<li>The port</ul><p>This <a href="https://en.wiktionary.org/wiki/quintuple">quintuple</a> is used to correctly identify a socket on a host. This host will add this socket to its local table by associating it with a socket descriptor (an integer).</p><p>While a socket is mostly used over a network to allow two hosts to communicate between each other, communication between local processes (e.g. IPC) also makes use of socket. They separate into a few different family, or domain:</p><ul><li>AF_UNIX for UNIX domain family, also called IPC socket<li>AF_INET for IPv4 Internet socket<li>AF_INET6 for IPv6 Internet socket</ul><p>The behaviour is similar, but in IPC socket, rather than using an underlying network protocol, all communication occurs entirely within the OS kernel. There is many more socket families existing, but they are often used for very specific use-case, such as Bluetooth, or virtual machine to host. <em>AF</em> stands for <em>Address family</em> while <em>PF</em> stands for <em>Protocol family</em> <a href="https://stackoverflow.com/questions/6729366/what-is-the-difference-between-af-inet-and-pf-inet-in-socket-programming">if you are wondering</a>. <em>AF</em> refers to addresses from the internet (e.g. IP), while <em>PF</em> can refer to anything in the protocol, usually socket/port.</p><p>Sockets are classified according to communication properties. Each socket has an associated type, which describes the semantics of communications using that socket. Each socket type incurs different properties such as reliability, ordering and session control. The most common ones are :</p><ul><li>Stream socket<li>Datagram socket<li>Raw socket<li>Unix domain socket</ul><p>Then, the socket has to support a protocol to allow data exchange through a standard set of rules such as UDP or TCP over IP.</p><p>I wrote a simple script in Python3 to showcase the different family/type/proto used by each socket. The choice of Python3 is arbitrary, I could have used any languages with a <code class="language-plaintext highlighter-rouge">socket</code> library (almost all). My point here will be to use this to create a client in <strong>Go</strong>, and a server in <strong>Python</strong>, to showcase that It is language-agnostic.</p><p>The code:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/149200915-8df6fd4e-d2fc-4a49-88c7-cc93bf9c4c12.png" alt="image" data-proofer-ignore></p><p>The output:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/149201355-a6776d9c-f123-4e87-8467-9fc6ef95c149.png" alt="image" data-proofer-ignore></p><p>We will go through each socket type, and implement a simple client/server at the end. Different transport layer protocols will be used and explained, for lower levels protocols, check out the networking concepts article.</p><h2 id="socket-creation">Socket creation<a href="#socket-creation" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Sockets by themselves are not particularly useful. The purpose of a socket of course is to communicate with other sockets. In order to create a socket that is able to communicate, you must follow a few mandatory steps.</p><p>The most common relationship between two sockets on remote machines is that of <strong>a server and a client</strong>. The server sockets waits in an open state (<em>Listen</em>) for a client to communicate with it. Or perhaps It broadcasts messages so any clients that listening will receive it.</p><p>First, we need to create this socket with a specific communication profile. It usually follow the following pattern</p><p><img data-src="https://user-images.githubusercontent.com/72258375/149205313-c9bc8b0b-cae1-4bb9-b0c9-f6ac20523390.png" alt="client_server(1)" data-proofer-ignore></p><p>As you can see, the server should start before the client, and be in an <strong>Accept</strong> state before exchanging data. On the client side, It has to match the family/type/protocol in order to match the connection. At the end, the client or the server can decide on closing the exchange, but the server still has to stop itself afterwards (since there could have been other clients).</p><p>In an Internet socket, the address would be an IP/Port, but on an IPC, the address would be local, so a file system node.</p><h2 id="socket-types">Socket types<a href="#socket-types" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Here we will check the different type of socket type available to us. There is a few to know, mainly in order to implement TCP/UDP and IPC.</p><h3 id="stream-socket">Stream socket<a href="#stream-socket" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><strong>Connection-oriented sockets</strong>, which use <em>Transmission Control Protocol</em> (TCP), <em>SCTP</em> or <em>DCCP</em>. A stream socket provides a <strong>sequenced and unique flow of error-free data</strong> without record boundaries, with well-defined mechanisms for creating and destroying connections and reporting errors. A stream socket transmits data <strong>reliably</strong>, <strong>in order</strong>, and with <strong>out-of-band</strong> capabilities. On the Internet, stream sockets are typically implemented using TCP so that applications can run across any networks using TCP/IP protocol.</p><p>This is the most used type of socket today, as It ensures what the server send will be received in the same sequence on the client. Imagine watching a movie, you would not want the image to stutter and miss frames every few seconds, so you prefer waiting for it to buffer reliably and watch it later.</p><p>They are represented by the family/type: <strong>AF_INET</strong>/<strong>SOCK_STREAM</strong></p><h3 id="datagram-socket">Datagram socket<a href="#datagram-socket" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><strong>Connectionless sockets</strong>, which use User Datagram Protocol (UDP). Each packet sent or received on a datagram socket is individually addressed and routed. Order and reliability are not guaranteed with datagram sockets, so multiple packets sent from one machine or process to another may arrive in any order or might not arrive at all. Special configuration may be required to send broadcasts on a datagram socket. In order to receive broadcast packets, a datagram socket should not be bound to a specific address, though in some implementations, broadcast packets may also be received when a datagram socket is bound to a specific address.</p><p><strong>UDP sockets</strong> do not have a established state. A UDP server process handles incoming datagrams from all remote clients sequentially through the same socket. UDP sockets are not identified by the remote address, but only by the local address.</p><p>This is a less reliable type of socket, but It focuses on delivery speed. If you already have a protocol on higher OSI layer that implements session and reliability, then <strong>UDP</strong> could be considered. Whenever there is a high bandwidth requirement, or you need to implement <strong>multicast</strong>, you can consider this socket type. In case of weather data for example, you do not care if you miss out on a few seconds data, but you care to receive it as fast as possible to prepare for a storm or earthquake.</p><p>They are represented by the family/type: <strong>AF_INET</strong>/<strong>SOCK_DGRAM</strong></p><h3 id="raw-socket">Raw socket<a href="#raw-socket" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Provides access to internal network protocols and interfaces. This type of socket is available only to users with root-user authority. Raw sockets allow to have direct access to lower-level communication protocols. Raw sockets are intended for advanced users who want to take advantage of some protocol feature that is not directly accessible through a normal interface, or who want to build new protocols on top of existing low-level protocols.</p><p>Raw sockets are normally datagram-oriented, though their exact characteristics are dependent on the interface provided by the protocol. Raw sockets are typically available in network equipment and are used for routing protocols such as IGRP and OSPF, and for Internet Control Message Protocol (ICMP).</p><p>They are usually available in most family, as one type, and they have no preferred protocol.</p><h3 id="unix-domain-socket">Unix domain socket<a href="#unix-domain-socket" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Also called <strong>Inter-process communication socket</strong> (IPC), they are a data communications endpoint for exchanging data between processes executing on the same host operating system. While they do not implement TCP/UDP/IP as they are not over the network, they still include stream/datagram sockets capabilities. They are a standard component of <em>POSIX operating systems</em>.</p><p>Available on the <strong>AF_UNIX</strong> family, the <em>SOCK_STREAM</em> socket type provides pipe-like facilities, while the <em>SOCK_DGRAM</em> and <em>SOCK_SEQPACKET</em> socket types usually provide reliable message-style communications.</p><p>As a more pratical example, we can use <code class="language-plaintext highlighter-rouge">nc</code> command to create them on the fly. As you can see, the address is simply the path on the filesystem.</p><p><img data-src="https://user-images.githubusercontent.com/72258375/149359328-ff07ae16-816e-4b2a-8cd3-bc2e2fd8df82.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/72258375/149359366-76f1a06d-8bd6-4575-b84b-9b50e325f53a.png" alt="image" data-proofer-ignore></p><p>It allows for a two-way communication (so by default a stream socket), be careful when creating them through this command, as It doesn’t destroy the socket file afterwards.</p><p><img data-src="https://user-images.githubusercontent.com/72258375/149359973-1e0ec348-d9e3-471c-a8ed-e90dd0c97e64.gif" alt="linux_socket" data-proofer-ignore></p><p><em>Note:</em> Named pipes are another mean of IPC within a Unix host, but they are only allow uni-directonial communication and can not distinguish clients from each other. UNIX socket are often considered a cleaner way for process to communicate between each other.</p><h2 id="socket-protocol">Socket protocol<a href="#socket-protocol" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Now that we have seen the different socket families (Unix, Internet IPv4, IPv6..), and socket types (Stream, datagram, raw, etc.), we can dive in the last part: the socket protocol.</p><p>A <em>protocol</em> is a standard set of rules for transferring data, such as UDP/IP and TCP/IP. The protocol has to be supported by the socket type (and by the socket family) to be used. While in most cases, the protocol will be automatically decided depending on the socket type (INET/Stream -&gt; TCP ; INET/Datagram -&gt; UDP), It is not always the case. Here is a few major protocols in the suite of Internet Network Protocols:</p><ul><li>TCP<li>UDP<li>RDS<li>IP<li>ICMP</ul><h3 id="udp">UDP<a href="#udp" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Without diving too far in the OSI layer, know those protocols stands on the <em>transport</em> layer, on top of the <em>network</em> that implements IP.</p><p>It is connectionless, offers datagram services but less reliable. While It is less popular than TCP, It is gaining traction through big scale stateful UDP services, such as <a href="https://blog.cloudflare.com/quic-version-1-is-live-on-cloudflare/">QUIC</a>.</p><p>UDP sockets can be either :</p><ul><li><em>connected</em> containing<ul><li>Source IP / Port<li>Destination IP / Port</ul><li><em>unconnected</em><ul><li>Bind IP / Port</ul></ul><p>An example with code, to ping Cloudflare DNS server with UDP packet:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/149408742-b3a0540c-9037-4612-9606-fd6dbd0de98d.png" alt="image" data-proofer-ignore></p><p>And It will timeout as the DNS server can not answer the request:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/149408864-07b12a47-e9a5-4a6e-bf44-78025c883b18.png" alt="image" data-proofer-ignore></p><p>As you can see, <em>connected</em> is great if you already know where you are going, but <em>unconnected</em> would be more fit for a server, as one socket can make multiple outbound queries.</p><p>However, UDP requires a bit more tuning when used, as <strong>TCP</strong> can transparently deal with MTU/fragmentation (e.g. with jumbo frames) and ICMP errors, while <strong>UDP</strong> might require extra care on those corner cases.</p><p>The UDP packet header:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/149413924-80fb3d86-e356-4a60-8d1a-8620e6806df0.png" alt="udp_header" data-proofer-ignore></p><h3 id="tcp">TCP<a href="#tcp" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>TCP provides reliable stream delivery of data between Internet hosts.</p><p>Like <strong>UDP</strong>, <strong>TCP</strong> uses the <em>Internet protocol (IP)</em> to transport data, and supports the block transmission of a continuous stream of datagrams between process ports. <strong>TCP</strong> ensures that data:</p><ul><li>is not damaged (checksum)<li>lost/duplicated (sequencing)<li>delivered out of order (acknowledgement)</ul><p>The packet header looks like this:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/149421146-96f96b0d-6ded-49c9-8c0a-2bc63573733f.png" alt="tcp_header_flag" data-proofer-ignore></p><p>The following are operational characteristics of <strong>TCP</strong>:</p><div class="table-wrapper"><table><thead><tr><th>Item<th>Description<tbody><tr><td><strong>Basic Data transfer</strong><td>TCP can transfer a continuous stream of 8-bit octets in each direction between its users by packaging some number of bytes into <em>segments</em> . TCP implementation allows a segment size of <em>at least 1024 bytes</em><tr><td><strong>Reliability</strong><td>A sequence number is assigned to each octet it transmits and requiring a positive acknowledgment (ACK) from the receiving TCP. If the ACK is not received within the time-out interval, the data is retransmitted. The TCP retransmission time-out value is dynamically determined for each connection, based on round-trip time<tr><td><strong>Flow control</strong><td>TCP governs the amount of data sent by returning a window with every ACK to indicate a range of acceptable sequence numbers beyond the last segment successfully received<tr><td><strong>Multiplexing</strong><td>TCP allows many processes within a single host to use TCP communications facilities simultaneously. TCP receives a set of addresses of ports within each host<tr><td><strong>Connections</strong><td>TCP must initialize and maintain certain status information for each data stream. The combination of this information, including sockets, sequence numbers, and window sizes, is called a connection<tr><td><strong>Precedence and security</strong><td>The priority function is provided to allow TCP to mark certain packets as higher priority. Packets with higher priority will get forwarded first. In addition, a provision is made to allow for compression and encryption of the TCP headers. All of these functions are signalled by a set of flags in the TCP header</table></div><p>As you can see, while the header is larger than in <strong>UDP</strong> case, It adds useful features for your connection. The way It operates is also different, as It is divided into three phases:</p><ul><li>Connection Establishment (through <strong>three-way handshake</strong> –&gt; SYN + SYN/ACK + ACK)<li>Data transfer<li>Connection termination (through <strong>four-way handshake</strong> –&gt; FIN + ACK - FIN + ACK)</ul><p>Now that we understand how It operates, and what It can offer, let’s talk about a few features and options in more details</p><h4 id="flow-control">Flow control<a href="#flow-control" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>Besides what checksum and sequence can achieve, <em>TCP</em> includes a flow and congestion control to avoid flooding one node. Having a mechanism for flow control is essential in an environment where machines of diverse network speeds communicate. <em>TCP</em> uses a sliding window flow control protocol, where each segment specifies the number of data It is willing to buffer for the connection. The sending host can send only up to that amount of data before It must wait for an acknowledgement and window update from the receiving host.</p><h4 id="congestion-control">Congestion control<a href="#congestion-control" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p><em>MSS</em> is the largest amount of data, specified in bytes, that TCP is willing to receive in a single segment. For best performance, It should be set small enough to avoid <em>IP fragmentation</em> so It can pass through a link MTU. This parameter is typically announced on the connection establishment and derived from the MTU size of the data link layer of the networks.</p><p>The next aspect is <em>congestion control</em>, where <em>TCP</em> uses mechanisms to achieve high performance and avoid congestion collapse (when incoming traffic &gt; outgoing bandwidth). It keeps the data flow below a rate that would trigger collapse through four intertwined algorithms: <em>slow-start, congestion avoidance, fast retransmit and fast recovery</em>. Without diving into the specifics, these algorithms set a small multiple of the <em>MSS</em> allowed on that connection depending on the round-trip time (RTT).</p><p>There is a lot more to cover on this part, as there is new algorithms coming in and out every year, and It can also depends on the network visibility (black-box or white-box).</p><h4 id="selective-acknowledgments">Selective acknowledgments<a href="#selective-acknowledgments" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>Also called <strong>SACK</strong>, It allows the receiver to acknowledge discontinuous blocks of packets which were received correctly, in addition to the sequence number immediately following the last sequence number received. This option is not mandatory, but has become widespread due to the quality of life improvement on long fat networks.</p><p><em>TCP</em> may experience poor performance when multiple packets are lost from one window of data. This forces the sender to either wait a roundtrip time to find out about each lost packet, or to retransmit segments which have been correctly received. With <em>SACK</em>, the data receiver can inform the sender about all segments that have arrived successfully, so the sender need to only retransmit the segments that have actually been lost.</p><h4 id="tcp-no-delay">TCP no delay<a href="#tcp-no-delay" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>Now we will check out a few options that are relevant for Real Time applications, the first one being <code class="language-plaintext highlighter-rouge">TCP_NODELAY</code>.</p><p><em>TCP</em> has had to introduce new heuristics to handle the changes effectively. These heuristics can result in a program becoming unstable. One example of heuristic behavior in TCP is that small buffers are delayed. This allows them to be sent as one network packet. This generally works well, but it can also create latencies.</p><p><em>TCP_NODELAY</em> is an option that can be used to turn this behavior off. For it to be used effectively, the application must avoid doing small buffer writes, as TCP will send these buffers as individual packets.</p><h4 id="tcp-cork">TCP cork<a href="#tcp-cork" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>Another TCP socket option that works in a similar way is <code class="language-plaintext highlighter-rouge">TCP_CORK</code>. When enabled, TCP will delay all packets until the application removes the cork, and allows the stored packets to be sent. This allows applications to build a packet in kernel space, which is useful when different libraries are being used to provide layer abstractions.</p><h3 id="grpc">GRPC<a href="#grpc" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Now that we have seen the main protocols (TCP/UDP), we can check out a different type called <code class="language-plaintext highlighter-rouge">gRPC</code>. It is an open source remote procedure call (RPC) system initially developed at Google in 2015. It uses <em>HTTP/2</em> for transport, with protocol buffers, bidirectional streaming and flow control. Most common usage scenarios include connecting services in a microservices style architecture.</p><p>It stands on the session layer, and could be considered a completly different kind from the previous sockets we saw, but they still create communication channels that enable unrelated processes to exchange data, and It is a very new way for process to communicate, so let’s try it !</p><p>We will implement a simple client in Go with <em>BubbleTea TUI</em>, that will interact with a python server. It will simply provide a list of possible sockets family, then types, then protocols (so we can re-use our previous script). <strong>Why ?</strong> Because I saw those technologies and I thought It would be cool to use them.</p><p>The code is available here: <a href="https://github.com/maxime-lair/grpc-goclient-pythonserver">grpc-goclient-pythonserver</a></p><p>The output:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/150878339-5d889986-843c-4b7e-bc01-9624d990f332.gif" alt="linux_socket" data-proofer-ignore></p><h2 id="interact-with-socket">Interact with socket<a href="#interact-with-socket" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Now that we know how to create and implement sockets, let’s check out how we can show and analyze them on Linux.</p><h3 id="useful-commands">Useful commands<a href="#useful-commands" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Linux includes a nice array of tools to display network activity. One of the most used one is <code class="language-plaintext highlighter-rouge">netstat</code> but It is on its way to become obsolete, and leave his seat for the <code class="language-plaintext highlighter-rouge">ss</code> utility. It is supposed to be faster and more human-readable.</p><h4 id="netstat">Netstat<a href="#netstat" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>The main example of <code class="language-plaintext highlighter-rouge">netstat</code> usage would be to display sockets on <em>LISTEN</em> state</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151001825-77589782-dc9a-4232-ba90-4868cd91f6df.png" alt="image" data-proofer-ignore></p><p>The command:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151003431-bc90775a-f529-40d3-8601-6eec1b4411bd.png" alt="image" data-proofer-ignore></p><p>You can notice some well known ports, such as <em>SSH</em> (22), <em>Performance monitor daemon</em> (44321) but also more obscure one such as <em>4330</em>, no idea of its use, and <em>50051</em> which was our previous GRPC project server.</p><p>There is many more arguments available, but you usually only care for TCP listen connections when handling server.</p><p>For example, to only show <em>dbus</em> unix sockets:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151004063-99a4cb80-667b-4270-a1a4-4345596db84c.png" alt="image" data-proofer-ignore></p><h4 id="ss-utility">ss utility<a href="#ss-utility" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>The basic ss command without any options simply lists all the connections regardless of the state they are in. Luckily, It is easy to transition into <code class="language-plaintext highlighter-rouge">ss</code> from <code class="language-plaintext highlighter-rouge">netstat</code> as most options operate in much the same fashion.</p><p>To check out the <em>TCP</em> sockets with their associated <em>cgroups</em></p><p><img data-src="https://user-images.githubusercontent.com/72258375/151011754-3ac45d47-6f9c-4d8d-b8dd-dae8a60c3f39.png" alt="image" data-proofer-ignore></p><p>Or <em>Unix stream</em> sockets:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151012617-1cb9404e-102d-4dde-8261-f10a933cf975.png" alt="image" data-proofer-ignore></p><p>One nice command to check non-localhost sockets:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151010875-6eee731e-ff57-4f97-867e-8ddc4271822b.png" alt="image" data-proofer-ignore></p><h4 id="others-utilities">Others utilities<a href="#others-utilities" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>Since everything is a file in Linux, you can also use <code class="language-plaintext highlighter-rouge">lsof</code> to check which sockets are in use</p><p>For Unix sockets:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151005799-12d0c7c0-7ecd-448c-998b-5b117bf47bc4.png" alt="image" data-proofer-ignore></p><p>To show the peer :</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151006408-ff50712e-6921-466d-a6ac-58b392ae26a8.png" alt="image" data-proofer-ignore></p><p>You can also use <code class="language-plaintext highlighter-rouge">nc</code> to start a quick listening socket on any ports, for testing purpose, such as :</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151018397-bb115c29-bfa0-4b8d-8741-bf60ea4fcc29.gif" alt="test_nc" data-proofer-ignore></p><h3 id="monitoring">Monitoring<a href="#monitoring" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>In order to properly monitor our sockets activity, we need to define our search perimeter.</p><p>Sockets are dependent on your network configuration (devices, routing, etc.) and your program ability to process them. It is necessary to have metrics from your hardware, network and process to fully analyze an issue. For example, you could think changing from TCP to UDP could increase your latency, but If you had routing in place depending on TCP or UDP packets in your network, this could skew the results.</p><p>This is why we want to focus on what metrics we can retrieve from our sockets. <code class="language-plaintext highlighter-rouge">ss -s</code> command already gave us a nice idea of the type of information we could be looking for, but where does It take this information from ?</p><h4 id="proc">/proc<a href="#proc" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>One of the first place we can look into is <code class="language-plaintext highlighter-rouge">/proc</code>, where we can find networking parameters and statistics.</p><p>We can find some nice statistics in <code class="language-plaintext highlighter-rouge">/proc/net</code>, i.e. <em>protocols</em> :</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151013720-b84c1ab4-752e-4149-b349-bec7caaacb6e.png" alt="image" data-proofer-ignore></p><p>Or <em>sockstat</em> / <em>tcp</em>:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151014000-1e2bf149-c6ab-4c73-bd19-45ef47bd29c7.png" alt="image" data-proofer-ignore></p><p>Thinking of metrics, we could first start from a top-down perspective, count the number of sockets, by family, type and protocols, then get more specific statistics with popular ones (such as TCP).</p><p>For example, taking TCP as a basis, we can check all stats available for TCP:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151015490-855c961d-4720-485e-81c1-f644552ab958.png" alt="image" data-proofer-ignore></p><p>We can see there is 102 possibles stats for a TCP connection, It could be interesting to check out each of them, as they could be useless or useful depending on your usecase. If you do not have <em>SACK</em> activated, you probably won’t need it.</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151016141-fd9e8cd4-55f0-4b24-8f54-04a31b064c1f.png" alt="image" data-proofer-ignore></p><p>You can also check out the kernel networking parts in <code class="language-plaintext highlighter-rouge">/proc/sys/net</code>, where you can see your system networking parameters:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151016657-fedbe314-3692-40d5-b9a5-687bb717b02c.png" alt="image" data-proofer-ignore></p><p>More information on each directory is available <a href="https://www.kernel.org/doc/html/latest/admin-guide/sysctl/net.html?highlight=sockets">here</a></p><h4 id="sys">/sys<a href="#sys" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>You can also find information in the <code class="language-plaintext highlighter-rouge">/sys</code> directory</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151020030-869f9b5f-f712-4cf7-b789-658fdf0ec6d7.png" alt="image" data-proofer-ignore></p><p>But most of these informations will depend on your devices, and be most hardware oriented.</p><p><img data-src="https://user-images.githubusercontent.com/72258375/151020410-1a29b9ee-0ccb-4240-aca6-40c8143a7219.png" alt="image" data-proofer-ignore></p><h2 id="conclusion">Conclusion<a href="#conclusion" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>We were able to check out the difference in multiple socket families, types and protocols, with the most popular being TCP/IP, UDP/IP, Unix/DGRAM, Unix/STREAM. We tried to dive into the specifics of TCP and UDP protocols to learn how and why they are different. We created a small project to explore new technologies such as GRPC through a nice golang client and python server, while having a BubbleTea TUI was not important, It was still nice to implement and try it out. We ended up with some commands and metrics we can use to view our system sockets.</p><p>Check out some of these credits below and the GRPC repository I linked, as I think I over-complicated some parts and not explained some others, this is one of the longest article I did, mainly due to the client/server side-project.</p><blockquote><p>Credits</p><p>https://www.ibm.com/docs/en/zos/2.2.0?topic=functions-socket-create-socket</p><p>https://www.digitalocean.com/community/tutorials/understanding-sockets</p><p>https://www.ibm.com/docs/en/zos/2.2.0?topic=concepts-tcpip</p><p>https://www.ibm.com/docs/pl/aix/7.1?topic=concepts-sockets</p><p>https://ipfs.io/ipfs/QmfYeDhGH9bZzihBUDEQbCbTc5k5FZKURMUoUvfmc27BwL/socket/services.html</p><p>https://blog.cloudflare.com/everything-you-ever-wanted-to-know-about-udp-sockets-but-were-afraid-to-ask-part-1/</p><p>https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_for_real_time/7/html/reference_guide/chap-sockets</p><p>https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/deployment_guide/s2-proc-dir-net</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/maxime-lair/categories/roadto/'>RoadTo</a>, <a href='/maxime-lair/categories/os-concepts/'>OS Concepts</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/maxime-lair/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/maxime-lair/tags/socket/" class="post-tag no-text-decoration" >socket</a> <a href="/maxime-lair/tags/tcp/" class="post-tag no-text-decoration" >tcp</a> <a href="/maxime-lair/tags/udp/" class="post-tag no-text-decoration" >udp</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Sockets - Bin/sh&url=https://maxime-lair.github.io/maxime-lair/posts/sockets/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/maxime-lair/posts/sockets/">Sockets</a><li><a href="/maxime-lair/posts/networking_concepts/">Networking concepts</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/maxime-lair/tags/linux/">linux</a> <a class="post-tag" href="/maxime-lair/tags/bash/">bash</a> <a class="post-tag" href="/maxime-lair/tags/initd/">initd</a> <a class="post-tag" href="/maxime-lair/tags/network/">network</a> <a class="post-tag" href="/maxime-lair/tags/bus/">bus</a> <a class="post-tag" href="/maxime-lair/tags/cadvisor/">cadvisor</a> <a class="post-tag" href="/maxime-lair/tags/concurrency/">concurrency</a> <a class="post-tag" href="/maxime-lair/tags/container/">container</a> <a class="post-tag" href="/maxime-lair/tags/device/">device</a> <a class="post-tag" href="/maxime-lair/tags/docker/">docker</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/maxime-lair/posts/memory_and_storage/"><div class="card-body"> <em class="timeago small" date="2022-01-03 19:00:00 +0100" >Jan 3, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Memory and storage</h3><div class="text-muted small"><p> In this article, we will take a look at how memory and storage interact in Linux, the different technology available, and their perks and defaults Note: Im running a CentOS9 Stream in this article...</p></div></div></a></div><div class="card"> <a href="/maxime-lair/posts/io_management/"><div class="card-body"> <em class="timeago small" date="2022-01-04 19:00:00 +0100" >Jan 4, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>IO management</h3><div class="text-muted small"><p> In/Out management on Linux allows us to understand how data flows in Linux, from information coming from the network card, to the hard-drive, passing by CPU, RAM or others devices. All systems wil...</p></div></div></a></div><div class="card"> <a href="/maxime-lair/posts/service_management/"><div class="card-body"> <em class="timeago small" date="2022-01-05 19:00:00 +0100" >Jan 5, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Service management</h3><div class="text-muted small"><p> In this article, we will take a look at how service management is used in Linux, first by defining it, understanding its behavior and configuration, and some useful commands. Note: Im running a Ce...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/maxime-lair/posts/threads_and_concurrency/" class="btn btn-outline-primary" prompt="Older"><p>Threads and concurrency</p></a> <a href="/maxime-lair/posts/networking_concepts/" class="btn btn-outline-primary" prompt="Newer"><p>Networking concepts</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/maxime-lair">Maxime Lair</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/maxime-lair/tags/linux/">linux</a> <a class="post-tag" href="/maxime-lair/tags/bash/">bash</a> <a class="post-tag" href="/maxime-lair/tags/initd/">initd</a> <a class="post-tag" href="/maxime-lair/tags/network/">network</a> <a class="post-tag" href="/maxime-lair/tags/bus/">bus</a> <a class="post-tag" href="/maxime-lair/tags/cadvisor/">cadvisor</a> <a class="post-tag" href="/maxime-lair/tags/concurrency/">concurrency</a> <a class="post-tag" href="/maxime-lair/tags/container/">container</a> <a class="post-tag" href="/maxime-lair/tags/device/">device</a> <a class="post-tag" href="/maxime-lair/tags/docker/">docker</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/maxime-lair/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/maxime-lair/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/maxime-lair/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
