<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Service management" /><meta name="author" content="Maxime Lair" /><meta property="og:locale" content="en" /><meta name="description" content="In this article, we will take a look at how service management is used in Linux, first by defining it, understanding its behavior and configuration, and some useful commands." /><meta property="og:description" content="In this article, we will take a look at how service management is used in Linux, first by defining it, understanding its behavior and configuration, and some useful commands." /><link rel="canonical" href="https://maxime-lair.github.io/maxime-lair/posts/service_management/" /><meta property="og:url" content="https://maxime-lair.github.io/maxime-lair/posts/service_management/" /><meta property="og:site_name" content="Bin/sh" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-05T19:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Service management" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Maxime Lair" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Maxime Lair"},"description":"In this article, we will take a look at how service management is used in Linux, first by defining it, understanding its behavior and configuration, and some useful commands.","url":"https://maxime-lair.github.io/maxime-lair/posts/service_management/","@type":"BlogPosting","headline":"Service management","dateModified":"2022-01-05T19:00:00+01:00","datePublished":"2022-01-05T19:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://maxime-lair.github.io/maxime-lair/posts/service_management/"},"@context":"https://schema.org"}</script><title>Service management | Bin/sh</title><link rel="apple-touch-icon" sizes="180x180" href="/maxime-lair/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/maxime-lair/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/maxime-lair/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/maxime-lair/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/maxime-lair/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Bin/sh"><meta name="application-name" content="Bin/sh"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/maxime-lair/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/maxime-lair/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/maxime-lair/" alt="avatar" class="mx-auto"> <img src="/maxime-lair/assets/img/favicons/avatar.gif" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/maxime-lair/">Bin/sh</a></div><div class="site-subtitle font-italic">Have fun reading</div></div><ul class="w-100"><li class="nav-item"> <a href="/maxime-lair/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/maxime-lair/roadTo/" class="nav-link"> <i class="fa-fw fas fa-road ml-xl-3 mr-xl-3 unloaded"></i> <span>ROAD TO DEVOPS</span> </a><li class="nav-item"> <a href="/maxime-lair/bin-sh/" class="nav-link"> <i class="fa-fw fas fa-tools ml-xl-3 mr-xl-3 unloaded"></i> <span>BIN-SH</span> </a><li class="nav-item"> <a href="/maxime-lair/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/maxime-lair/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/maxime-lair/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/maxime-lair/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/maxime-lair" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/maxime-lair/"> Home </a> </span> <span>Service management</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Service management</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/maxime-lair">Maxime Lair</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-01-05 19:00:00 +0100" data-toggle="tooltip" data-placement="bottom" title="Wed, Jan 5, 2022, 7:00 PM +0100" >Jan 5, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1492 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><p>In this article, we will take a look at how service management is used in Linux, first by defining it, understanding its behavior and configuration, and some useful commands.</p><p><em>Note: Im running a CentOS9 Stream in this article, It came out in December 2021, I will not be covering UNIX or Windows, only Linux</em></p><p>We will be focusing on the newer system <em>systemd</em> - we will not talk about its ancestor (sysV) or competitors (upstart..)</p><h2 id="definition">Definition<a href="#definition" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>All processes running on the system are child processes of the <em>systemd</em> init process. It is an init system used to boostrap you from the kernel to user space.</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147766518-0ad30710-0a49-4b6e-b35c-afc396c4f9a7.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147766425-2ccbf342-a66b-4cf5-980a-3b960e2715b2.png" alt="image" data-proofer-ignore></p><p><em>systemd</em> is rather new, as It was developped in 2010 and stable as of 2015. It is rapidly becoming the most used init process, but has some concerns on its inner security.</p><p>It will be considered as a system and service manager. For those that haven’t noticed, <a href="https://en.wikipedia.org/wiki/System_D">It is a play on words</a> refering to its quick adapting ability, but for real, the <strong>d</strong> in <em>systemd</em> refers to <em>daemon</em>, and If you need to refer to it, call it <strong>System daemon</strong>, not <strong>System D</strong>.</p><p>It is hard to define <em>systemd</em> as a good or bad news for Linux. While It is praised by developers and users alike for its reliable parallelism during boot and centralized management of processes, daemons, services and mount points, It strayed away from the UNIX philosophy by its design (e.g. mission creep/bloat feeling).</p><p>We will focus on the service management part on <em>systemd</em> and the init process will be covered in another article.</p><h2 id="what-does-systemd-manage-">What does systemd manage ?<a href="#what-does-systemd-manage-" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>First, It does <em>NOT</em> manage anything in <em>/etc/init.d/</em>. You should never add configuration there, as It will have no effect. There is backwards compatibility with SysV init scripts, but they will not be searched in this <em>deprecated</em> directory.</p><p>You can explore <em>/etc/systemd/</em> instead, It gives an idea of the inner architecture</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147768945-3c5fb5f9-af67-4c21-8ef6-9cd1f69a5c9b.png" alt="image" data-proofer-ignore></p><p>You can analyze each file full configuration with <code class="language-plaintext highlighter-rouge">systemd-analyze cat-config [PATH_TO_FILE]</code></p><p>At its core, <em>systemd</em> manages units, and there is 11 available, highlighted in bold are the most important:</p><div class="table-wrapper"><table><thead><tr><th>Units<th>Description<tbody><tr><td>Service<td><strong>Start and control daemons and processes they consist of, most used type</strong><tr><td>Socket<td><strong>Encapsulate local IPC or network sockets in the system, useful for socket-based activation</strong><tr><td>Target<td><strong>Useful to group other units through a chain of dependencies</strong><tr><td>Device<td><strong>Expose kernel devices and may be used to implement device-based activation</strong><tr><td>Mount<td><strong>Control mount points in the file system</strong><tr><td>Automount<td>For on-demand mounting of file systems (hot-plug..)<tr><td>Timer<td><strong>Useful for triggering activation of other units based on timers</strong><tr><td>Swap<td>Similar to mount units, encapsulate memory swap components of the operating system<tr><td>Path<td>Used to activate other services when file system objects change<tr><td>Slice<td><strong>Group and manage processes and resources (cgroups)</strong><tr><td>Scope<td>Similar to service units, but for foreign processes management (e.g. init)</table></div><p>Units are named after their configuration files, which can include positive or negative requirement dependencies as well as ordering.</p><p>One example of such unit is the cron daemon, used for scheduling your batch.</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147771567-f18ae4b9-06fb-4a9c-9dd4-8403c27503ed.png" alt="image" data-proofer-ignore></p><p>To put it into perspective, my CentOS uses 370 unit files, with 141 loaded units</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147773333-71a31b47-d4c2-4b57-9f3c-430ce901fcde.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147773306-5ae3ddd5-086f-420f-9be1-f35df4fa0216.png" alt="image" data-proofer-ignore></p><h2 id="how-are-units-made-">How are units made ?<a href="#how-are-units-made-" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Each units is configured through a plain-text files, with a <em>.ini</em> type syntax.</p><p><em>systemd</em> stores them in three location, depending on their usage</p><div class="table-wrapper"><table><thead><tr><th>Path<th>Type of unit<tbody><tr><td><em>/usr/lib/systemd/system</em><td>systemd default unit distributed by RPM packages<tr><td><em>/run/systemd/system</em><td>Systemd unit files created at run time. This directory takes precedence over the default<tr><td><em>/etc/systemd/system</em><td>Systemd unit files created by systemctl enable as well as unit files added for extending a service. This directory takes precedence over the run-time one</table></div><p>An example of <em>crond.service</em> unit configuration, part of the default configuration:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147774495-cb3060bf-e1b1-4dba-aab2-90fe13012765.png" alt="image" data-proofer-ignore></p><p>You can notice its scheduling dependencies on <em>After=</em> and <em>WantedBy</em> ; It is also able to restart itself on a specific timer.</p><p><em>Note:</em> It’s common case to have those service units configuration created in the three locations, and there is a link on higher priority paths towards the default one. Be careful when you change it, as anything written in the default unit path (in <em>/usr/lib/</em>) will be overwritten at each OS update.</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147775146-a4a428fc-b659-429c-9790-fb865d88f6f2.png" alt="image" data-proofer-ignore></p><h2 id="well-known-units">Well known units<a href="#well-known-units" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>If you are interested in <em>systemd</em> service architecture, try out <code class="language-plaintext highlighter-rouge">systemctl list-dependencies</code></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147775707-5ede546d-296a-4fe0-b81a-42b9a6c93d92.png" alt="image" data-proofer-ignore></p><p>Among all the running units (and not only services), there is a few interesting ones that you might already know:</p><div class="table-wrapper"><table><thead><tr><th>Unit<th>Type<th>Used for<tbody><tr><td>proc-sys-fs-binfmt_misc<td>automount<td>all block/character devices<tr><td>run-user-xxxx<td>mount<td>storing files used by running processes for that user<tr><td>sys-kernel-debug<td>mount<td>Kernel debug file system<tr><td>sys-kernel-tracing<td>mount<td>Kernel Trace file system<tr><td>init<td>scope<td>System and service manager<tr><td>auditd<td>service<td>Security auditing service<tr><td>crond<td>service<td>Command scheduler<tr><td>firewalld<td>service<td>Dynamic firewall daemon<tr><td>NetworkManager<td>service<td>Handles network configuration<tr><td>sshd<td>service<td>OpenSSH server daemon<tr><td>systemd-journald<td>service<td>Journal service<tr><td>systemd-logind<td>service<td>user login management<tr><td>user@xxxx<td>service<td>User manager for UID xxxx<tr><td>user<td>slice<td>User and session slice<tr><td>dbus<td>socket<td>D-Bus System Message Bus Socket<tr><td>network<td>target<td>Network component</table></div><p>There is many more, and you can check a unit’s critical chain with <code class="language-plaintext highlighter-rouge">systemd-analyze critical-chain [unit]</code></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147778492-b6201399-d94c-4e26-8b7b-8b54893e68b2.png" alt="image" data-proofer-ignore></p><p>If you need to have better boot time, you can check what take the longest.</p><h2 id="possible-state-of-units">Possible state of units<a href="#possible-state-of-units" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Let’s preface it by saying <em>systemd</em> does not communicate with services that have not been started by it. All is managed through a process PID, and used to query and manage the service. If you did not start your daemon through <em>systemd</em>, It will be impossible to query its state through <em>systemd</em> commands.</p><p>There is two different types of state available on an unit:</p><ul><li>Loaded : If the unit file has been found, and It is enabled<li>Active : If the unit is running or stopped</ul><p>Since It is required to load an unit before running it, you need to consider both types to get a unit’s status.</p><h3 id="unit-loading">Unit loading<a href="#unit-loading" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>A unit has to be loaded if you need to run it. This state depends entirely on the unit configuration, and It can be one of the following:</p><ul><li><em>loaded</em><li><em>not-found</em> (e.g. not found in the three possibles paths)<li><em>bad-setting</em><li><em>error</em> (e.g. set a masked service as enabled for example)<li><em>masked</em></ul><p><em>An example of bad-setting, where we missed the initial / in the path</em></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147968650-9bd9cd7b-0b94-49fb-8e50-ad503c5e111b.png" alt="image" data-proofer-ignore></p><p>After correcting the issue:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147968759-47a31a53-faa4-4a4e-b573-4ee189ea155b.png" alt="image" data-proofer-ignore></p><p>A note on <em>mask</em> : It is a stronger version of <strong>disable</strong> ; It links the unit file to <em>/dev/null</em>, making it impossible to start them. It prohibits all kinds of activation, including enablement or manual activation. It can be used to prevent accidentally using a service that conflicts with a running one.</p><p>Once It is loaded, It will look in its configuration for its enablement state ([Install] section of the unit file). It hooks the unit into its various suggested places (e.g. the unit is automatically started on boot or when a particular kind of hardware is plugged in).</p><h3 id="unit-activation">Unit activation<a href="#unit-activation" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Your unit can be either <strong>started</strong> or <strong>stopped</strong>, but It can actually be more refined than that. A unit possesses two levels of activation state:</p><ul><li>High-level (often called <strong>active</strong>), and can take the following state:<ul><li>active<li>inactive<li>failed<li>reloading<li>activating<li>deactivating</ul><li>Low-level called <strong>sub</strong>, whose values depend on unit-type specific detailed state of the unit You can check what substates is available per unit type with <code class="language-plaintext highlighter-rouge">systemctl --state=help</code></ul><p><img data-src="https://user-images.githubusercontent.com/72258375/147956854-86cfa91d-400d-4fcc-a0b2-cbb4d027aa14.png" alt="image" data-proofer-ignore></p><h2 id="create-our-own-service-unit">Create our own service unit<a href="#create-our-own-service-unit" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Let’s create our own service unit, which will simply repeat a ping/pong in a file. It will help us understand its state, and how to use a custom file as a service. We could imagine implementing a socket, device, or any other types of units.</p><p>Two things to note before we start:</p><ul><li>System services are <strong>unable</strong> to read from the standard input stream, and when started, It connects its standard input to <em>/dev/null</em> to prevent any interaction.<li>System services do not inherit any context (e.g. environment variables like <em>HOME</em> or <em>PATH</em>) from the invoking user and their session. It runs in a clean execution context. You can check this out by typing <code class="language-plaintext highlighter-rouge">env</code> for your local environment variables and <code class="language-plaintext highlighter-rouge">systemctl show-environment</code> for <em>systemd</em> environment variables in your shell.</ul><p><img data-src="https://user-images.githubusercontent.com/72258375/147947040-10831d0b-76dd-4de5-b026-211c02a3fd85.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147975659-7c05a685-07f7-4d8f-874c-64f85ad9b106.png" alt="image" data-proofer-ignore></p><p>Now, let’s create our service unit, in <em>/etc/systemd/system</em></p><p>We will call it pingpong.service:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147974302-153c544d-31de-4c15-acca-2fbc9d1364d4.png" alt="image" data-proofer-ignore></p><p>We write a simple script, which repeatedly write ping/pong into a named pipe</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147973142-27ffeb3f-dd68-40d8-b472-2bea5b0b77ef.png" alt="image" data-proofer-ignore></p><p>Let’s start it ! We check its status beforehand</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147974352-e4c4a47e-4aba-4b02-a87a-d261ef747851.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147974388-671a39d6-d935-464c-88c0-6fa376874925.png" alt="image" data-proofer-ignore></p><p>We can see It created a pipe successfully</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147974408-42dafe1f-baa8-4646-9d41-44d15d196365.png" alt="image" data-proofer-ignore></p><p>The script is not perfect, as It will be blocked if someone else access this pipe, as <code class="language-plaintext highlighter-rouge">read</code> is blocking. The script location is also not perfect, as It depends on a non-sudo user, and represents a security risk, It would be better to review its permission and put it in <em>/usr/local/bin</em></p><p>Let’s stop it, and check It deleted our named pipe</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147974591-a4978d79-47de-4e23-9a41-aa39a6d420a3.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147974601-1833498b-dc0f-4ef3-8291-ff406201d7eb.png" alt="image" data-proofer-ignore></p><p>All good ! It’s also possible to create a unit template, if you want to create a skeleton of your units.</p><h2 id="useful-commands">Useful commands<a href="#useful-commands" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>To reload and apply unit changes:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>systemctl daemon-reload
systemctl restart [UNIT_NAME]
</pre></table></code></div></div><p>To have an overview of overridden/modified unit files, use <code class="language-plaintext highlighter-rouge">systemd-delta</code></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147975270-8f0450b8-b33b-440d-a13a-f129238f199f.png" alt="image" data-proofer-ignore></p><p>To view groupings of processes system-wise, use <code class="language-plaintext highlighter-rouge">systemd-cgls</code></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147975420-e30702fc-be4f-4ad4-b830-ac362969dbeb.png" alt="image" data-proofer-ignore></p><blockquote><p>Credits</p><p>https://en.wikipedia.org/wiki/Systemd</p><p>https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/chap-managing_services_with_systemd</p><p>https://www.computernetworkingnotes.com/linux-tutorials/</p><p>https://www.freedesktop.org/software/systemd/man/systemctl.html</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/maxime-lair/categories/roadto/'>RoadTo</a>, <a href='/maxime-lair/categories/os-concepts/'>OS Concepts</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/maxime-lair/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/maxime-lair/tags/initd/" class="post-tag no-text-decoration" >initd</a> <a href="/maxime-lair/tags/service/" class="post-tag no-text-decoration" >service</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Service management - Bin/sh&url=https://maxime-lair.github.io/maxime-lair/posts/service_management/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/maxime-lair/posts/sockets/">Sockets</a><li><a href="/maxime-lair/posts/networking_concepts/">Networking concepts</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/maxime-lair/tags/linux/">linux</a> <a class="post-tag" href="/maxime-lair/tags/bash/">bash</a> <a class="post-tag" href="/maxime-lair/tags/initd/">initd</a> <a class="post-tag" href="/maxime-lair/tags/network/">network</a> <a class="post-tag" href="/maxime-lair/tags/bus/">bus</a> <a class="post-tag" href="/maxime-lair/tags/cadvisor/">cadvisor</a> <a class="post-tag" href="/maxime-lair/tags/concurrency/">concurrency</a> <a class="post-tag" href="/maxime-lair/tags/container/">container</a> <a class="post-tag" href="/maxime-lair/tags/device/">device</a> <a class="post-tag" href="/maxime-lair/tags/docker/">docker</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/maxime-lair/posts/startup_management/"><div class="card-body"> <em class="timeago small" date="2022-01-06 19:00:00 +0100" >Jan 6, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Startup management</h3><div class="text-muted small"><p> In this article, we will take a look at how init management is used in Linux, first by defining it, understanding its behavior and configuration, and some useful commands. Note: Im running a CentO...</p></div></div></a></div><div class="card"> <a href="/maxime-lair/posts/process_management/"><div class="card-body"> <em class="timeago small" date="2022-01-01 19:00:00 +0100" >Jan 1, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Process Management</h3><div class="text-muted small"><p> In this article, we will talk about process management in any IT operation, we will start by defining what process and managing them means, what commands can help us achieve this, and common pitfal...</p></div></div></a></div><div class="card"> <a href="/maxime-lair/posts/memory_and_storage/"><div class="card-body"> <em class="timeago small" date="2022-01-03 19:00:00 +0100" >Jan 3, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Memory and storage</h3><div class="text-muted small"><p> In this article, we will take a look at how memory and storage interact in Linux, the different technology available, and their perks and defaults Note: Im running a CentOS9 Stream in this article...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/maxime-lair/posts/io_management/" class="btn btn-outline-primary" prompt="Older"><p>IO management</p></a> <a href="/maxime-lair/posts/startup_management/" class="btn btn-outline-primary" prompt="Newer"><p>Startup management</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/maxime-lair">Maxime Lair</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/maxime-lair/tags/linux/">linux</a> <a class="post-tag" href="/maxime-lair/tags/bash/">bash</a> <a class="post-tag" href="/maxime-lair/tags/initd/">initd</a> <a class="post-tag" href="/maxime-lair/tags/network/">network</a> <a class="post-tag" href="/maxime-lair/tags/bus/">bus</a> <a class="post-tag" href="/maxime-lair/tags/cadvisor/">cadvisor</a> <a class="post-tag" href="/maxime-lair/tags/concurrency/">concurrency</a> <a class="post-tag" href="/maxime-lair/tags/container/">container</a> <a class="post-tag" href="/maxime-lair/tags/device/">device</a> <a class="post-tag" href="/maxime-lair/tags/docker/">docker</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/maxime-lair/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/maxime-lair/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/maxime-lair/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
