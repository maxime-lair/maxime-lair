<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Memory and storage" /><meta name="author" content="Maxime Lair" /><meta property="og:locale" content="en" /><meta name="description" content="In this article, we will take a look at how memory and storage interact in Linux, the different technology available, and their perks and defaults" /><meta property="og:description" content="In this article, we will take a look at how memory and storage interact in Linux, the different technology available, and their perks and defaults" /><link rel="canonical" href="https://maxime-lair.github.io/maxime-lair/posts/memory_and_storage/" /><meta property="og:url" content="https://maxime-lair.github.io/maxime-lair/posts/memory_and_storage/" /><meta property="og:site_name" content="Bin/sh" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-03T19:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Memory and storage" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Maxime Lair" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Maxime Lair"},"description":"In this article, we will take a look at how memory and storage interact in Linux, the different technology available, and their perks and defaults","url":"https://maxime-lair.github.io/maxime-lair/posts/memory_and_storage/","@type":"BlogPosting","headline":"Memory and storage","dateModified":"2022-01-03T19:00:00+01:00","datePublished":"2022-01-03T19:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://maxime-lair.github.io/maxime-lair/posts/memory_and_storage/"},"@context":"https://schema.org"}</script><title>Memory and storage | Bin/sh</title><link rel="apple-touch-icon" sizes="180x180" href="/maxime-lair/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/maxime-lair/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/maxime-lair/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/maxime-lair/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/maxime-lair/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Bin/sh"><meta name="application-name" content="Bin/sh"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/maxime-lair/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/maxime-lair/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/maxime-lair/" alt="avatar" class="mx-auto"> <img src="/maxime-lair/assets/img/favicons/avatar.gif" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/maxime-lair/">Bin/sh</a></div><div class="site-subtitle font-italic">Have fun reading</div></div><ul class="w-100"><li class="nav-item"> <a href="/maxime-lair/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/maxime-lair/roadTo/" class="nav-link"> <i class="fa-fw fas fa-road ml-xl-3 mr-xl-3 unloaded"></i> <span>ROAD TO DEVOPS</span> </a><li class="nav-item"> <a href="/maxime-lair/bin-sh/" class="nav-link"> <i class="fa-fw fas fa-tools ml-xl-3 mr-xl-3 unloaded"></i> <span>BIN-SH</span> </a><li class="nav-item"> <a href="/maxime-lair/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/maxime-lair/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/maxime-lair/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/maxime-lair/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/maxime-lair" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/maxime-lair/"> Home </a> </span> <span>Memory and storage</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Memory and storage</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/maxime-lair">Maxime Lair</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-01-03 19:00:00 +0100" data-toggle="tooltip" data-placement="bottom" title="Mon, Jan 3, 2022, 7:00 PM +0100" >Jan 3, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1938 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><p>In this article, we will take a look at how memory and storage interact in Linux, the different technology available, and their perks and defaults</p><p><em>Note: Im running a CentOS9 Stream in this article, It came out this very month, I will not be covering UNIX or Windows, only Linux</em></p><h2 id="physical-memory">Physical memory<a href="#physical-memory" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="definition">Definition<a href="#definition" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>We will try to focus on the different type of memory in Linux. While there is the physical hardware that makes up RAM, and the virtual memory you see on Linux.</p><p>RAM was made to be performant, quick access on read and write, while disk can focus on long-term memory.</p><h3 id="types-of-ram">Types of RAM<a href="#types-of-ram" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Most RAM today are of DDR-RAM type, which stands for <em>D</em>ouble <em>D</em>ata <em>R</em>ate and exist since 2002. Compared to a single data rate, Its performance is doubled (up to 3 GB/s) as It was able to read data on both the rising and falling edges of the clock signal.</p><p>DDR2 was then invented in 2004, delivering up to 6.5 GB/s bandwidth. It introduced the <em>dual-channel memory</em> concept, where CPUs could communicate using a bus with the memory module through independent channels, essentially amping up the bandwidth as data could be sent on more than one channel. Today, servers are usually designed with six to eight channels.</p><p>The most important part is : you can not use more than one type of memory per motherboard, they can only handle on type of memory (DDR2 or DDR3 or else..). In reality, It goes even further than that as you only use memories of the same type, manufacturer and frequency.</p><p>Each DDR iteration made memory faster and more energy efficient. DDR3, which came out in 2007, made bandwidth go up to 15 GB/s.</p><p>Today, most servers are using DDR4, pushing up to 25GB/s, and we are slowly shifting towards DDR5, released in 2020, with 50 GB/s bandwidth.</p><p>If you try to get DDR5 memory now, It will probably cost you a lot of more than for DDR4, as It is still difficult to ramp up into mass-production.</p><p><em>Note</em>: There is also <em>VRAM</em> but It is only used in graphic cards, and It is a lot more expensive.</p><p>You might also notice some memory marked as <em>ECC</em> which stands for <em>E</em>rror <em>c</em>orrection <em>c</em>ode. ECC memory maintains a memory system immune to single-bit errors. It decreases your memory overall performance by 2-3% and cost more, but makes your memory a lot more reliable. Mostly used in database or file servers, It reduces the number of crashes due to memory data corruption.</p><p>On Linux, you can check the physical chip information with <code class="language-plaintext highlighter-rouge">dmidecode</code> - type 17 is memory device</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147559741-46e49dd1-94dc-4c27-8843-e8bc19d0f7be.png" alt="image" data-proofer-ignore></p><p>If you are not happy with DDR memory, you can upgrade to <em>HBM</em> memory. They will be able to handle ~ 300 GB/s but they do not come cheap.</p><h2 id="virtual-memory">Virtual memory<a href="#virtual-memory" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="definition-1">Definition<a href="#definition-1" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>As system becomes more greedy in memory usage and RAM becoming more scarce, Linux had to think about ways to make the system reproduce RAM virtually.</p><p>Virtual memory is using a disk as an extension of RAM, so the effective size of usable memory grows correspondingly.</p><p>Of course, reading and writing on the hard disk is thousand times slower than using physical memory, but with the rise of SSD, this technology is becoming more and more efficient.</p><p>The part of the hard disk used as virtual memory is called <em>swap space</em>. It can be a normal file or a separate partition (recommended). While using a file allows for more flexibility, as you dont need to reformat it, the current standard is to use LVM data partition together with a swap partition.</p><p>Like so:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147560231-ba32b5b6-3fa8-433a-848c-e451db107550.png" alt="image" data-proofer-ignore></p><p>Linux memory management is responsible for :</p><ul><li>Implementation of virtual memory<li>Demand paging<li>Memory allocation both for kernel internal structures and user space programs<li>Mapping files into processes address space<li>and much more !</ul><p><em>Note</em> Swapping means writing the whole process out to swap space, while paging is writing only fixed size parts (a few kb) and is more efficient.</p><h3 id="buffering">Buffering<a href="#buffering" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><em>Shared</em> memory is when multiple process use the same memory block.</p><p><em>Buffers/cache</em> represents the disk buffer cache.</p><p>As reading from a disk is very slow compared to physical memory, It is common to save commonly accessed data onto the memory until no longer needed. It speeds up all but the first read (when you first access it on the disk), and It is called <em>disk buffering</em> while the memory used for this purpose is called <em>buffer cache</em></p><p>If this buffer cache is full, the data unused for the longest time is discarded first to free up some memory.</p><p>This is important as this disk buffering works for writes as well, and is the cause of lost data when the system crash as It has no time to save it onto the disk.</p><p>You can force this write with <em>sync</em> or <em>bdflush</em> (automatic on Linux every 30 seconds)</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147561561-06de508c-2ed2-4a96-b707-13575dc3795d.png" alt="image" data-proofer-ignore></p><p>This cache size is automatically set by Linux and is usually made up of all free RAM. It decreases in size when memory is needed for greedier process.</p><h3 id="paging">Paging<a href="#paging" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Physical memory is not necessarily contiguous, It can be accessible as a set of distinct adress ranges. All this makes dealing directly with physical memory quite the hassle and to avoid this complexity a concept of virtual memory was developed.</p><p>Paging is the bridge between this virtual and physical address. Each time a software requires to write, the virtual memory only share the needed information in the physical memory (<em>demand paging</em>), while providing a mechanism for protecting and controlling sharing of data between processes.</p><p>Each physical memory page can be mapped as one or more virtual pages, and these mappings are described by page tables to allow translation from a virtual to physical memory address.</p><p>You can check this table in <em>/proc/meminfo</em></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147562696-ec9bad53-128c-4d96-84ca-7d5aeb054a00.png" alt="image" data-proofer-ignore></p><p>To avoid using CPUs for each address translation, modern architecture use a TLB or <em>T</em>ranslation <em>L</em>ookaside <em>B</em>uffer, to keep this information cached.</p><p>We could dive deeper in the subject, but we just need to know this created the concept of <em>Huge page</em> which is mapped by either <em>TLB</em> or <em>THP</em></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147563280-29aa9ade-2331-4ada-a543-da66f46f71ba.png" alt="image" data-proofer-ignore></p><h3 id="commands">Commands<a href="#commands" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>To know your memory, you can check with <em>free</em></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147555688-ea9ccbc5-db92-4dbc-ad82-dd1f1002ff2e.png" alt="image" data-proofer-ignore></p><p>It will print you informations about your memory usage, notice how Swap is included, although It’s written on disk. RAM is usually called <em>physical</em> memory.</p><p>This information is polled from <em>/proc/meminfo</em> ; but some others informations are available in <em>/sys/devices/system/memory/</em></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147556284-e4effdf6-44be-4683-9d8f-d841480ec3ab.png" alt="image" data-proofer-ignore></p><p>We can test this memory usage with several command:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>cat /dev/zero |head -c 5G | tail
tail /dev/zero
cat &lt;( &lt;/dev/zero head -c 500m) &lt;(sleep 5) | tail
</pre></table></code></div></div><p>Let’s try to fill out memory and swap space ! First we fill our physical memory (8G) and swap (5G) with 10G of data.</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147563890-6f3f42bf-449c-47cc-b477-ef9042b150cd.png" alt="image" data-proofer-ignore></p><p>then we check our memory is used with <em>top</em>:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147563950-5dd25179-fc08-4381-885f-7c6eb28ee33f.png" alt="image" data-proofer-ignore></p><p>or with <em>free</em></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147564005-a15422ef-7992-41f2-b242-4631d8cc4a18.png" alt="image" data-proofer-ignore></p><p>And after we stop it, we are back to normal:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147564037-bdbaa83b-c23b-4223-8b81-d5b101891f63.png" alt="image" data-proofer-ignore></p><p>You can also look into <em>pv</em> command to have an overtime change on RAM (whether in rate/sec or minutes)</p><h2 id="storage">Storage<a href="#storage" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Now that we have seen how physical and virtual memory interacts, we will dive into long-term memory, the one that stays after each reboot.</p><h3 id="definition-2">Definition<a href="#definition-2" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Linux storage is based on block devices, providing buffered access to the hardware. While there is multitude of storage solutions now, whether they are cloud based, an external device or internal, they all share the same objective: storing data.</p><p>It can used to save files, run tasks and applications, and today came to be in gigabytes or terabytes capacity.</p><p>We will not cover USB flash drive, optical storage such as Blu-Ray discs, as there are decreasingly useful with the advent of mobile phones and cloud solutions.</p><h3 id="different-types-of-storage">Different types of storage<a href="#different-types-of-storage" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="hard-drive">Hard-drive<a href="#hard-drive" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>An HDD (<em>H</em>ard <em>d</em>isk <em>d</em>rive) is a hard drive that uses mechanical spinning disks using a magnetic tip to read and write data. HDDs are considered as the most reliable data storage hardware in most servers, the main appeal to get them are their cheap cost compared to their capacity, although they are slower than others solutions.</p><p>They are often called SATA drive, as this is the name of the computer bus interface that connects them to the motherboard. It’s not wrong to say that, but SSDs can also be connected to the motherboard through the SATA interface. To bring a few words on SATA, there is today others solutions like Thunderbolt, SCSI, NVMe. SATA has 3 versions (I II III), going from 150 MB/s, 300 MB/s to 600MB/s, however <a href="https://hdd.userbenchmark.com/">most hard-drive are unable to beyond 150 MB/s speed</a>.</p><p>This is the reason why SATA drive are an idiom for hard-drive disk, even though SATA III could handle some SSD speed.</p><p>Server hard drive works 24/7/365, and usually comes in with a <a href="https://www.seagate.com/fr/fr/products/hard-drives/barracuda-hard-drive/">3-5 years warranty</a>. This makes them way more pricer, but manufacturer often categorize them into three:</p><ul><li>ECO - consumer-grade hard-drive<li>BC - pro-grade hard-drive<li>EP - server-grade hard-drive</ul><p>These hard-drives have differents requirements, for reliability, recovery and speed. Most benchmark will try to compare their sequential and random write and read speeds, but price and capacity should be equally considered. There is never too many HDDs.</p><h4 id="ssd">SSD<a href="#ssd" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>While HDDs are mechanical disks, SSD are flash storage and are much faster (boot time is 10s). They are more expensive, and data recovery can be complicated. It is however easier to transport (no moving parts), and consume less power. Most manufacturers are now focusing primarly on SSDs instead of HDDs.</p><p>SSDs are usually limited to their bus speed, in case of SATA III at around 450 MB/s sequential speed making them 3 times faster than HDDs. For comparaison, USB3 has transmission speed up to 600 MB/s while USB2 are limited to 50 MB/s.</p><p>This is the reason why most SSDs are now connected through PCIe (3.0 or 4.0) or NVMe, as they are able to scale way better.</p><p><em>PCIe</em> depends on their version (currently from 1 to 6) and their number of channels. x16 being the usual amount.</p><div class="table-wrapper"><table><thead><tr><th>PCIe version<th>PCIe x16 speed (GB/s)<tbody><tr><td>1.x<td>4<tr><td>2.x<td>8<tr><td>3.x<td>16<tr><td>4.x<td>32<tr><td>5.x<td>63<tr><td>6.x<td>126</table></div><p>With SSD, going from SATA to PCIe-6-x16 (which comes out next year), would make it go 210 times faster. Of course, you would be then limited by your RAM or CPU speed.</p><p><em>NVMe</em> is a communication interface standing between your CPU and your storage interface using PCIe sockets. It was solely designed for SSD. While there is a few SSDs format, such as <em>2.5”</em> or <em>mSATA</em>, the only one compatible with <em>NVMe</em> version are <em>M.2</em> and <em>U.2</em>. Main differences between these last two formats is U.2 allows for hot-swap, you can add them during your system runtime.</p><p>If you are still not satisfied with this, check out <a href="https://www.intel.com/content/www/us/en/products/details/memory-storage.html">Optane</a>.</p><h3 id="cool-commands">Cool commands<a href="#cool-commands" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Now that we understand the different types of storages, Linux allows us to check their health through a few commands</p><p>You could use <em>df</em> to report file system disk space usage. But It doesn’t show you your physical hard drives.</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147573437-3f596eec-d04f-40a6-8a72-b0cb93b4c0b0.png" alt="image" data-proofer-ignore></p><p>If you are more interested in which files takes the most space, <em>du</em> is your tool:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147573846-19df5e37-cc62-4968-86d0-10cccd9426fb.png" alt="image" data-proofer-ignore></p><p>More focused on drives ? Use <em>fdisk</em> ir <em>lsblk</em>:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147573963-735d9d77-ef88-4401-a49c-ab9ec63dd78a.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147574214-0e2f09bf-dca3-450e-bef3-5f116bb0ad89.png" alt="image" data-proofer-ignore></p><p>Oh you meant actual hardware informations on those disks ? Use <em>lshw -class disk</em></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147574181-3a3c7b38-935f-451c-b023-87c814e4859c.png" alt="image" data-proofer-ignore></p><p>If you want to dive deeper, you might want to check out the available informations in <em>/dev/disk</em> where you can sort by:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/147574278-8cefe57d-a024-452a-bf1a-119423b9993a.png" alt="image" data-proofer-ignore></p><p>or in <em>/sys/block</em></p><p><img data-src="https://user-images.githubusercontent.com/72258375/147574318-ccb69a01-5b6d-4413-8bb1-362d247f6e3d.png" alt="image" data-proofer-ignore></p><h2 id="to-go-further">To go further<a href="#to-go-further" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>If you are running another OS, check out <a href="http://bhami.com/rosetta.html">rosetta</a> to help you find the right commands.</p><p>There was a lot to cover on this one, but I learned a lot on the virtual memory and bus interface, so all worth it !</p><blockquote><p>Credits</p><p>https://thewiredshopper.com/ddr3-vs-ddr4-vs-ddr5/</p><p>https://en.wikipedia.org/wiki/ECC_memory</p><p>https://0xax.gitbooks.io/linux-insides/content/Theory/linux-theory-1.html</p><p>https://tldp.org/LDP/sag/html/buffer-cache.html</p><p>https://www.kernel.org/doc/html/latest/admin-guide/mm/concepts.html</p><p>https://www.redhat.com/sysadmin/dissecting-free-command</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/maxime-lair/categories/roadto/'>RoadTo</a>, <a href='/maxime-lair/categories/os-concepts/'>OS Concepts</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/maxime-lair/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/maxime-lair/tags/memory/" class="post-tag no-text-decoration" >memory</a> <a href="/maxime-lair/tags/storage/" class="post-tag no-text-decoration" >storage</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Memory and storage - Bin/sh&url=https://maxime-lair.github.io/maxime-lair/posts/memory_and_storage/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/maxime-lair/posts/sockets/">Sockets</a><li><a href="/maxime-lair/posts/networking_concepts/">Networking concepts</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/maxime-lair/tags/linux/">linux</a> <a class="post-tag" href="/maxime-lair/tags/bash/">bash</a> <a class="post-tag" href="/maxime-lair/tags/initd/">initd</a> <a class="post-tag" href="/maxime-lair/tags/network/">network</a> <a class="post-tag" href="/maxime-lair/tags/bus/">bus</a> <a class="post-tag" href="/maxime-lair/tags/cadvisor/">cadvisor</a> <a class="post-tag" href="/maxime-lair/tags/concurrency/">concurrency</a> <a class="post-tag" href="/maxime-lair/tags/container/">container</a> <a class="post-tag" href="/maxime-lair/tags/device/">device</a> <a class="post-tag" href="/maxime-lair/tags/docker/">docker</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/maxime-lair/posts/io_management/"><div class="card-body"> <em class="timeago small" date="2022-01-04 19:00:00 +0100" >Jan 4, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>IO management</h3><div class="text-muted small"><p> In/Out management on Linux allows us to understand how data flows in Linux, from information coming from the network card, to the hard-drive, passing by CPU, RAM or others devices. All systems wil...</p></div></div></a></div><div class="card"> <a href="/maxime-lair/posts/service_management/"><div class="card-body"> <em class="timeago small" date="2022-01-05 19:00:00 +0100" >Jan 5, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Service management</h3><div class="text-muted small"><p> In this article, we will take a look at how service management is used in Linux, first by defining it, understanding its behavior and configuration, and some useful commands. Note: Im running a Ce...</p></div></div></a></div><div class="card"> <a href="/maxime-lair/posts/startup_management/"><div class="card-body"> <em class="timeago small" date="2022-01-06 19:00:00 +0100" >Jan 6, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Startup management</h3><div class="text-muted small"><p> In this article, we will take a look at how init management is used in Linux, first by defining it, understanding its behavior and configuration, and some useful commands. Note: Im running a CentO...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/maxime-lair/posts/file_systems/" class="btn btn-outline-primary" prompt="Older"><p>File systems</p></a> <a href="/maxime-lair/posts/io_management/" class="btn btn-outline-primary" prompt="Newer"><p>IO management</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/maxime-lair">Maxime Lair</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/maxime-lair/tags/linux/">linux</a> <a class="post-tag" href="/maxime-lair/tags/bash/">bash</a> <a class="post-tag" href="/maxime-lair/tags/initd/">initd</a> <a class="post-tag" href="/maxime-lair/tags/network/">network</a> <a class="post-tag" href="/maxime-lair/tags/bus/">bus</a> <a class="post-tag" href="/maxime-lair/tags/cadvisor/">cadvisor</a> <a class="post-tag" href="/maxime-lair/tags/concurrency/">concurrency</a> <a class="post-tag" href="/maxime-lair/tags/container/">container</a> <a class="post-tag" href="/maxime-lair/tags/device/">device</a> <a class="post-tag" href="/maxime-lair/tags/docker/">docker</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/maxime-lair/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/maxime-lair/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/maxime-lair/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
