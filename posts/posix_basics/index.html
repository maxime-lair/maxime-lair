<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Posix basics" /><meta name="author" content="Maxime Lair" /><meta property="og:locale" content="en" /><meta name="description" content="Note: I will be using CentOS 9 Stream which came out in Dec 2021. I will not be covering UNIX OS." /><meta property="og:description" content="Note: I will be using CentOS 9 Stream which came out in Dec 2021. I will not be covering UNIX OS." /><link rel="canonical" href="https://maxime-lair.github.io/maxime-lair/posts/posix_basics/" /><meta property="og:url" content="https://maxime-lair.github.io/maxime-lair/posts/posix_basics/" /><meta property="og:site_name" content="Bin/sh" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-07T19:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Posix basics" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Maxime Lair" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Maxime Lair"},"description":"Note: I will be using CentOS 9 Stream which came out in Dec 2021. I will not be covering UNIX OS.","url":"https://maxime-lair.github.io/maxime-lair/posts/posix_basics/","@type":"BlogPosting","headline":"Posix basics","dateModified":"2022-01-07T19:00:00+01:00","datePublished":"2022-01-07T19:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://maxime-lair.github.io/maxime-lair/posts/posix_basics/"},"@context":"https://schema.org"}</script><title>Posix basics | Bin/sh</title><link rel="apple-touch-icon" sizes="180x180" href="/maxime-lair/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/maxime-lair/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/maxime-lair/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/maxime-lair/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/maxime-lair/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Bin/sh"><meta name="application-name" content="Bin/sh"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/maxime-lair/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/maxime-lair/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/maxime-lair/" alt="avatar" class="mx-auto"> <img src="/maxime-lair/assets/img/favicons/avatar.gif" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/maxime-lair/">Bin/sh</a></div><div class="site-subtitle font-italic">Have fun reading</div></div><ul class="w-100"><li class="nav-item"> <a href="/maxime-lair/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/maxime-lair/roadTo/" class="nav-link"> <i class="fa-fw fas fa-road ml-xl-3 mr-xl-3 unloaded"></i> <span>ROAD TO DEVOPS</span> </a><li class="nav-item"> <a href="/maxime-lair/bin-sh/" class="nav-link"> <i class="fa-fw fas fa-tools ml-xl-3 mr-xl-3 unloaded"></i> <span>BIN-SH</span> </a><li class="nav-item"> <a href="/maxime-lair/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/maxime-lair/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/maxime-lair/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/maxime-lair/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/maxime-lair" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/maxime-lair/"> Home </a> </span> <span>Posix basics</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Posix basics</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/maxime-lair">Maxime Lair</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-01-07 19:00:00 +0100" data-toggle="tooltip" data-placement="bottom" title="Fri, Jan 7, 2022, 7:00 PM +0100" >Jan 7, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1193 words"> <em>6 min</em> read</span></div></div></div><div class="post-content"><p><em>Note:</em> I will be using CentOS 9 Stream which came out in Dec 2021. I will not be covering UNIX OS.</p><p>We will dive in POSIX standardization, on the best practices for system interfaces, command interpreter and utilities. Our goal is to understand why POSIX exist, and how to apply their best practices.</p><h2 id="definition">Definition<a href="#definition" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>POSIX stands for <em>Portable Operating System Interface</em> and defines a set of standards to provide compatibility between different computing platforms.</p><p>The latest version is available <a href="https://pubs.opengroup.org/onlinepubs/9699919799/toc.htm">here</a></p><p>Not all operating systems are POSIX certified (such as <em>Solaris</em> or <em>macOS</em>), but they can be fully or partly POSIX compatible, as such, most OS try to be mostly POSIX-compliant.</p><p>A few examples of POSIX-compliant:</p><ul><li>Android<li>FreeBSD<li>Linux<li>VMWare ESXi<li>Cygwin</ul><p>When writing scripts/programs to rely on POSIX standards, you ensure to port them among a large family of Unix derivatives.</p><h2 id="shell-language">Shell language<a href="#shell-language" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>The shell is a command language interpreter, which includes a syntax used by the <code class="language-plaintext highlighter-rouge">sh</code> utility.</p><p>The difference between <code class="language-plaintext highlighter-rouge">#!/bin/bash</code> and <code class="language-plaintext highlighter-rouge">#!/bin/sh</code> is slim, as It spawns from the same binary:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/148414947-202f59df-4b7a-460e-b64e-94a33888635a.png" alt="image" data-proofer-ignore></p><p><img data-src="https://user-images.githubusercontent.com/72258375/148415029-dd97433f-9246-4791-9382-28b1f7b6d908.png" alt="image" data-proofer-ignore></p><p>Using <code class="language-plaintext highlighter-rouge">sh</code> is simply having <code class="language-plaintext highlighter-rouge">bash</code> with <a href="https://tiswww.case.edu/php/chet/bash/POSIX"><code class="language-plaintext highlighter-rouge">--posix</code> option</a> after startup files are read. These startup files are the ones read and executed from the expanded <code class="language-plaintext highlighter-rouge">ENV</code> variable.</p><p>It is not the case on every OS though, <code class="language-plaintext highlighter-rouge">busybox</code> can link <code class="language-plaintext highlighter-rouge">sh</code> to a <a href="https://en.wikipedia.org/wiki/Almquist_shell">different shell</a>, but one common point they all have is having a <code class="language-plaintext highlighter-rouge">/bin/sh</code>. This is why in our case, It is better to use <code class="language-plaintext highlighter-rouge">sh</code> as a shell basis for our scripts.</p><h2 id="variable-expansion">Variable expansion<a href="#variable-expansion" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>It is possible to manipulate variable with prefix, suffix, default, fallback and message in portable shell syntax.</p><p>Consider this shell script:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/148214028-2e3712f3-a582-4b0e-8d8d-0140668f2dbf.png" alt="image" data-proofer-ignore></p><p>It will print the variable value depending on its parameters</p><p><img data-src="https://user-images.githubusercontent.com/72258375/148214059-2da3bcc9-5ca7-425f-83bb-21235188ae1f.png" alt="image" data-proofer-ignore></p><p>While there is a few more, for example to search and replace, It is interesting to know It is POSIX compliant to do so.</p><p>Be careful with <code class="language-plaintext highlighter-rouge">unset</code> as It is not compliant on arrays (only variables and functions) and <code class="language-plaintext highlighter-rouge">declare</code></p><h2 id="environment-variables">Environment variables<a href="#environment-variables" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Environment variables should always use UPPERCASE and underscore, like so:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/148242733-4f51a291-0a29-46ac-9ddb-62097cb54185.png" alt="image" data-proofer-ignore></p><p>Only way to set an environment variable is through <code class="language-plaintext highlighter-rouge">export</code>, but they will only be available in the current session.</p><h2 id="program-exit-status">Program exit status<a href="#program-exit-status" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Standard exit code is <em>0</em> for success, any number from <em>1</em> to <em>255</em> is to denote something else.</p><p>To access the last exit code, you can use <code class="language-plaintext highlighter-rouge">$?</code></p><p><img data-src="https://user-images.githubusercontent.com/72258375/148244032-c1716bcd-47b9-4826-b6ff-312e5e88a08b.png" alt="image" data-proofer-ignore></p><p>It is possible to suppress the exit code by nullifying <em>STDERR</em> and adding an <em>OR</em>, but this is not recommended</p><p><img data-src="https://user-images.githubusercontent.com/72258375/148245258-d879e571-0e0d-48ad-a4e1-ecbea3dbf235.png" alt="image" data-proofer-ignore></p><h2 id="command-line-utility-api-conventions">Command line utility API conventions<a href="#command-line-utility-api-conventions" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Standard POSIX utilities includes an argument syntax to help them process.</p><p>Unless otherwise noted, all utility descriptions use this notation, which is illustrated by this command:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/148248585-5fa5b28b-43c0-4559-93f3-3cb34335699f.png" alt="image" data-proofer-ignore></p><p>The utility is always named first, then comes the option-arguments, and includes two optionals modes : short options (single <code class="language-plaintext highlighter-rouge">-</code>) and long options (double <code class="language-plaintext highlighter-rouge">--</code>).</p><p>In long options, parameters are added with <code class="language-plaintext highlighter-rouge">--long_option=&lt;PARAMETER&gt;</code>, while short options are one character-long and requires a <blank_space> between their parameters, e.g. `-s <PARAMETER>`.</PARAMETER></blank_space></p><p>Optional arguments are then followed by mandatory arguments (called <strong>operands</strong>). You can include <code class="language-plaintext highlighter-rouge">--</code> in-between to specify the ends of the optional-arguments, and helps in specific directory like <em>systemd</em>, where some filenames begin with <code class="language-plaintext highlighter-rouge">-</code></p><p>A few guidelines (or design pattern) on these utilities:</p><ul><li>Thou shalt not use more than nine characters or capital letters for their name<li>Option-arguments should not be optional</ul><p>While nothing is said about <code class="language-plaintext highlighter-rouge">-h</code> or <code class="language-plaintext highlighter-rouge">-v</code>, they are usually kept for <em>help</em> and <em>version</em> section.</p><h2 id="filenames">Filenames<a href="#filenames" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Filenames cannot contain “/” nor ASCII NUL “\0”. While this is flexible, a few more tiny limitations is necessary to be added upon the existing set of limitations.</p><p>The character <code class="language-plaintext highlighter-rouge">-</code> is one to look out for, as It can lead to disaster.</p><p>Let’s create a file named <code class="language-plaintext highlighter-rouge">-rf</code></p><p><img data-src="https://user-images.githubusercontent.com/72258375/148251686-acf8abc6-0296-4ca3-98ac-f5841e7fc2ca.png" alt="image" data-proofer-ignore></p><p>And see what happens when someone try to remove all files in the directory with <code class="language-plaintext highlighter-rouge">rm *</code>, It should not destroy directories right ?</p><p><img data-src="https://user-images.githubusercontent.com/72258375/148251832-c88f1b07-90d8-458e-9790-7c04a5c92983.png" alt="image" data-proofer-ignore></p><p>Well.. not only did It destroy the directory, It also kept the <em>-rf</em> file. This could lead to bigger disaster.</p><p>If you need to remove it, use <code class="language-plaintext highlighter-rouge">--</code></p><p><img data-src="https://user-images.githubusercontent.com/72258375/148252083-b4712e27-af24-47e0-bfb5-8226b55d38ac.png" alt="image" data-proofer-ignore></p><p>There is many more examples, but this is the reason why you need to ensure your file names should not start with <code class="language-plaintext highlighter-rouge">-</code> or control chars (such as <code class="language-plaintext highlighter-rouge">\n\t</code>).</p><h2 id="directory-structure">Directory structure<a href="#directory-structure" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Most linux distribution conform to <strong>FHS</strong> (Filesystem Hierarchy Standard), which defines a stricter set of rules to define the directory structure.</p><p>POSIX defines a few guidelines on this structure:</p><ul><li>Applications should not be writing files in <code class="language-plaintext highlighter-rouge">/</code> or <code class="language-plaintext highlighter-rouge">/dev</code><li><code class="language-plaintext highlighter-rouge">/tmp</code> should be made available for applications in need of temporary files creation.<li><code class="language-plaintext highlighter-rouge">/dev/null</code> is an infinite data sink, data written to or reads from this path should always return <em>EOF</em><li><code class="language-plaintext highlighter-rouge">/dev/tty</code> Synonym for controlling terminal associated with the process group of that process</ul><h2 id="regular-expression">Regular expression<a href="#regular-expression" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>POSIX defines two regular expression syntax, called <strong>BRE</strong> (Basic) and <strong>ERE</strong> (Extended).</p><p><strong>BRE</strong> provides extensions to achieve consistency between utility programs such as <code class="language-plaintext highlighter-rouge">grep</code> or <code class="language-plaintext highlighter-rouge">sed</code>.</p><p>In BRE, It defines the following syntax:</p><div class="table-wrapper"><table><thead><tr><th>Metacharacter<th>Description<tbody><tr><td><code class="language-plaintext highlighter-rouge">.</code><td>Matches any single character<tr><td><code class="language-plaintext highlighter-rouge">[ ]</code><td>Matches a single character that is contained within the brackets<tr><td><code class="language-plaintext highlighter-rouge">[^ ]</code><td>Matches a single character that is <strong>not</strong> contained within the brackets<tr><td><code class="language-plaintext highlighter-rouge">^</code><td>Matches the starting position, if It is the first character of the regex<tr><td><code class="language-plaintext highlighter-rouge">$</code><td>Matches the ending position, if It is the last character of the regex<tr><td><code class="language-plaintext highlighter-rouge">*</code><td>Matches the preceding element zero or more times<tr><td><code class="language-plaintext highlighter-rouge">\{m\}</code><td>Matches the preceding element exactly <em>m</em> times<tr><td><code class="language-plaintext highlighter-rouge">\( \)</code><td>Defines a capturing group, and treated as a single element</table></div><p>While defining character classes that are used <strong>within brackets</strong></p><div class="table-wrapper"><table><thead><tr><th>POSIX class<th>similar to<th>meaning<tbody><tr><td>[:upper:]<td>[A-Z]<td>uppercase letters<tr><td>[:lower:]<td>[a-z]<td>lowercase letters<tr><td>[:alpha:]<td>[A-Za-z]<td>upper- and lowercase letters<tr><td>[:digit:]<td>[0-9]<td>digits<tr><td>[:xdigit:]<td>[0-9A-Fa-f]<td>hexadecimal digits<tr><td>[:alnum:]<td>[A-Za-z0-9]<td>digits, upper- and lowercase letters<tr><td>[:punct:]<td> <td>punctuation (all graphic characters except letters and digits)<tr><td>[:blank:]<td>[ \t]<td>space and TAB characters only<tr><td>[:space:]<td>[ \t\n\r\f\v]<td>blank (whitespace) characters</table></div><p>And the more advanced <strong>extended</strong> regular expressions can sometimes be used with Unix utilities (<code class="language-plaintext highlighter-rouge">grep -E</code>, <code class="language-plaintext highlighter-rouge">sed -E</code>, or default in <code class="language-plaintext highlighter-rouge">awk</code>), the main difference is that some backlashes are removed, and non-greedy quantifiers (?)</p><h2 id="shell-syntax">Shell syntax<a href="#shell-syntax" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Let’s use <a href="https://github.com/koalaman/shellcheck"><code class="language-plaintext highlighter-rouge">Shellcheck</code></a> and test some commands to see how to write POSIX compliant code. It assumes you are somewhat familiar with shell scripting.</p><p>The script:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/148436205-c424f51b-eedd-402a-a5e2-407420338fc6.png" alt="image" data-proofer-ignore></p><p>The execution:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/148436264-e913a984-adae-436a-8083-86dccea354f7.png" alt="image" data-proofer-ignore></p><p>Shellsheck:</p><p><img data-src="https://user-images.githubusercontent.com/72258375/148436321-0e81fee4-913c-4e9a-a0db-1c479beaf697.png" alt="image" data-proofer-ignore></p><p>In the end, some rules to remember are:</p><ul><li>Use <code class="language-plaintext highlighter-rouge">test</code> or single bracket for comparison. Use gt/lt for numbers, and avoid strings comparison with <code class="language-plaintext highlighter-rouge">==</code>.<li>Do not use arrays, and do not use <code class="language-plaintext highlighter-rouge">declare</code> <code class="language-plaintext highlighter-rouge">let</code> <code class="language-plaintext highlighter-rouge">typeset</code> or blank spaces when declaring variables<li>Always quote strings, and use <code class="language-plaintext highlighter-rouge">printf</code> instead of <code class="language-plaintext highlighter-rouge">echo</code></ul><h2 id="conclusion">Conclusion<a href="#conclusion" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>While this ends POSIX basics, there is a lot to review in order to be POSIX compliant across all your shell scripts. The most difficult part is to know which tool is part of the core package, and which one requires an installation check.</p><p>A few tools exist to check your syntax, like <code class="language-plaintext highlighter-rouge">Checkbashims</code> or <a href="https://github.com/koalaman/shellcheck"><code class="language-plaintext highlighter-rouge">Shellcheck</code></a>. One tool, not really POSIX related, is useful for checking your bash commands is <a href="https://explainshell.com">explainshell</a></p><p><img data-src="https://user-images.githubusercontent.com/72258375/148260361-be230fca-9fa6-4158-934a-0890c3389233.png" alt="image" data-proofer-ignore></p><p>Being POSIX compliant can be a pain (specially on grep, awk and sed implementations). It should serve as a common set of best practices for your scripts.</p><blockquote><p>Credits</p><p>https://riptutorial.com/posix</p><p>https://pubs.opengroup.org/onlinepubs/9699919799/toc.htm</p><p>https://www.baeldung.com/linux/posix</p><p>https://en.wikibooks.org/wiki/Regular_Expressions/POSIX-Extended_Regular_Expressions</p><p>https://betterprogramming.pub/24-bashism-to-avoid-for-posix-compliant-shell-scripts-8e7c09e0f49a</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/maxime-lair/categories/roadto/'>RoadTo</a>, <a href='/maxime-lair/categories/os-concepts/'>OS Concepts</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/maxime-lair/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/maxime-lair/tags/bash/" class="post-tag no-text-decoration" >bash</a> <a href="/maxime-lair/tags/posix/" class="post-tag no-text-decoration" >posix</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Posix basics - Bin/sh&url=https://maxime-lair.github.io/maxime-lair/posts/posix_basics/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/maxime-lair/posts/sockets/">Sockets</a><li><a href="/maxime-lair/posts/networking_concepts/">Networking concepts</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/maxime-lair/tags/linux/">linux</a> <a class="post-tag" href="/maxime-lair/tags/bash/">bash</a> <a class="post-tag" href="/maxime-lair/tags/initd/">initd</a> <a class="post-tag" href="/maxime-lair/tags/network/">network</a> <a class="post-tag" href="/maxime-lair/tags/bus/">bus</a> <a class="post-tag" href="/maxime-lair/tags/cadvisor/">cadvisor</a> <a class="post-tag" href="/maxime-lair/tags/concurrency/">concurrency</a> <a class="post-tag" href="/maxime-lair/tags/container/">container</a> <a class="post-tag" href="/maxime-lair/tags/device/">device</a> <a class="post-tag" href="/maxime-lair/tags/docker/">docker</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/maxime-lair/posts/tmux/"><div class="card-body"> <em class="timeago small" date="2021-12-27 19:00:00 +0100" >Dec 27, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Tmux</h3><div class="text-muted small"><p> Tmux fun As my number of services piles up, I’m starting to repeat the same step of connecting to my VPS and on different user every day. I want to try and automate that, so I can create multiple...</p></div></div></a></div><div class="card"> <a href="/maxime-lair/posts/bash_scripting/"><div class="card-body"> <em class="timeago small" date="2022-02-03 19:00:00 +0100" >Feb 3, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Bash scripting</h3><div class="text-muted small"><p> Under construction Credits</p></div></div></a></div><div class="card"> <a href="/maxime-lair/posts/memory_and_storage/"><div class="card-body"> <em class="timeago small" date="2022-01-03 19:00:00 +0100" >Jan 3, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Memory and storage</h3><div class="text-muted small"><p> In this article, we will take a look at how memory and storage interact in Linux, the different technology available, and their perks and defaults Note: Im running a CentOS9 Stream in this article...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/maxime-lair/posts/startup_management/" class="btn btn-outline-primary" prompt="Older"><p>Startup management</p></a> <a href="/maxime-lair/posts/virtualization/" class="btn btn-outline-primary" prompt="Newer"><p>Virtualization</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/maxime-lair">Maxime Lair</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/maxime-lair/tags/linux/">linux</a> <a class="post-tag" href="/maxime-lair/tags/bash/">bash</a> <a class="post-tag" href="/maxime-lair/tags/initd/">initd</a> <a class="post-tag" href="/maxime-lair/tags/network/">network</a> <a class="post-tag" href="/maxime-lair/tags/bus/">bus</a> <a class="post-tag" href="/maxime-lair/tags/cadvisor/">cadvisor</a> <a class="post-tag" href="/maxime-lair/tags/concurrency/">concurrency</a> <a class="post-tag" href="/maxime-lair/tags/container/">container</a> <a class="post-tag" href="/maxime-lair/tags/device/">device</a> <a class="post-tag" href="/maxime-lair/tags/docker/">docker</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/maxime-lair/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/maxime-lair/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/maxime-lair/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
